import{_ as v,a as b,o as k,b as r,c as i,d as t,i as l,j as f,k as h,F as C,r as F,t as n,f as g,l as x,h as q,p as w}from"./index-DMQ78c8o.js";const B={class:"cart"},E={class:"container"},N={key:0,class:"loading"},S={key:1,class:"empty-state"},V={key:2,class:"cart-content"},$={class:"cart-items"},I=["src","alt"],P={class:"item-details"},Q={class:"item-name"},j={class:"item-price"},D={class:"item-quantity"},L=["onClick","disabled"],M={class:"quantity-value"},R=["onClick"],T={class:"item-total"},z={class:"total-price"},A=["onClick"],G={class:"cart-summary card"},H={class:"summary-row"},J={class:"summary-row"},K={class:"summary-row total"},O=["disabled"],U={__name:"Cart",setup(W){const _=q(),a=b(),d=g(!0),u=async(e,s)=>{try{await a.updateQuantity(e,s)}catch(c){console.error("Failed to update quantity:",c),alert("æ›´æ–°æ•°é‡å¤±è´¥ï¼Œè¯·é‡è¯•")}},m=async e=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ"))try{await a.removeFromCart(e)}catch(s){console.error("Failed to remove item:",s),alert("åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•")}},y=()=>{_.push("/orders")};return k(async()=>{try{await a.fetchCart()}catch(e){console.error("Failed to fetch cart:",e)}finally{d.value=!1}}),(e,s)=>{const c=x("router-link");return r(),i("div",B,[t("div",E,[s[9]||(s[9]=t("h1",{class:"page-title"},"è´­ç‰©è½¦",-1)),d.value?(r(),i("div",N,[...s[0]||(s[0]=[t("div",{class:"spinner"},null,-1)])])):l(a).isEmpty?(r(),i("div",S,[s[2]||(s[2]=t("div",{class:"empty-state-icon"},"ğŸ›’",-1)),s[3]||(s[3]=t("p",{class:"empty-state-text"},"è´­ç‰©è½¦æ˜¯ç©ºçš„",-1)),f(c,{to:"/",class:"btn btn-primary"},{default:h(()=>[...s[1]||(s[1]=[w("å»è´­ç‰©",-1)])]),_:1})])):(r(),i("div",V,[t("div",$,[(r(!0),i(C,null,F(l(a).items,o=>(r(),i("div",{key:o.product_id,class:"cart-item card"},[t("img",{src:o.image,alt:o.name,class:"item-image"},null,8,I),t("div",P,[t("h3",Q,n(o.name),1),t("p",j,"Â¥"+n(o.price.toFixed(2)),1)]),t("div",D,[t("button",{class:"btn btn-secondary btn-sm",onClick:p=>u(o.product_id,o.quantity-1),disabled:o.quantity<=1},"-",8,L),t("span",M,n(o.quantity),1),t("button",{class:"btn btn-secondary btn-sm",onClick:p=>u(o.product_id,o.quantity+1)},"+",8,R)]),t("div",T,[t("span",z,"Â¥"+n((o.price*o.quantity).toFixed(2)),1),t("button",{class:"btn btn-danger btn-sm",onClick:p=>m(o.product_id)},"åˆ é™¤",8,A)])]))),128))]),t("div",G,[s[7]||(s[7]=t("h2",{class:"summary-title"},"è®¢å•æ‘˜è¦",-1)),t("div",H,[s[4]||(s[4]=t("span",null,"å•†å“æ•°é‡:",-1)),t("span",null,n(l(a).totalItems)+" ä»¶",1)]),t("div",J,[s[5]||(s[5]=t("span",null,"å°è®¡:",-1)),t("span",null,"Â¥"+n(l(a).totalPrice.toFixed(2)),1)]),s[8]||(s[8]=t("div",{class:"summary-row"},[t("span",null,"è¿è´¹:"),t("span",null,"Â¥0.00")],-1)),t("div",K,[s[6]||(s[6]=t("span",null,"æ€»è®¡:",-1)),t("span",null,"Â¥"+n(l(a).totalPrice.toFixed(2)),1)]),t("button",{class:"btn btn-primary btn-lg",onClick:y,disabled:l(a).isEmpty}," å»ç»“ç®— ",8,O)])]))])])}}},Y=v(U,[["__scopeId","data-v-79759e4f"]]);export{Y as default};
