import{_ as g,u as C,a as x,o as w,b as l,c,d as t,j as p,k as v,t as e,n as S,i as _,e as q,f as i,l as $,m as A,h as B,p as m}from"./index-DMQ78c8o.js";const D={class:"product-detail"},F={key:0,class:"loading"},M={key:1,class:"empty-state"},N={key:2,class:"container"},P={class:"product-content"},R={class:"product-image-section"},T=["src","alt"],V={class:"product-details"},j={class:"product-title"},z={class:"product-category"},E={class:"product-rating"},I={class:"reviews"},G={class:"product-price-section"},H={class:"product-price"},J={class:"product-description"},K={class:"quantity-selector"},L={class:"quantity-controls"},O=["disabled"],Q={class:"quantity-value"},U=["disabled"],W={class:"product-actions"},X=["disabled"],Y={__name:"ProductDetail",setup(Z){const b=A();B();const d=C(),y=x(),s=i(null),r=i(!0),a=i(1),k=async()=>{try{const n=await q.get(`/products/${b.params.id}`);s.value=n.data}catch(n){console.error("Failed to fetch product:",n)}finally{r.value=!1}},h=async()=>{try{await y.addToCart(s.value,a.value),alert("å·²æ·»åŠ åˆ°è´­ç‰©è½¦ï¼")}catch(n){console.error("Failed to add to cart:",n),alert("æ·»åŠ å¤±è´¥ï¼Œè¯·é‡è¯•")}};return w(()=>{k()}),(n,o)=>{const u=$("router-link");return l(),c("div",D,[r.value?(l(),c("div",F,[...o[2]||(o[2]=[t("div",{class:"spinner"},null,-1)])])):s.value?(l(),c("div",N,[t("div",P,[t("div",R,[t("img",{src:s.value.image,alt:s.value.name,class:"product-image"},null,8,T)]),t("div",V,[t("h1",j,e(s.value.name),1),t("p",z,e(s.value.category),1),t("div",E,[o[6]||(o[6]=t("span",{class:"stars"},"â­",-1)),t("span",null,e(s.value.rating),1),t("span",I,"("+e(s.value.numReviews)+" è¯„ä»·)",1)]),t("div",G,[t("span",H,"Â¥"+e(s.value.price.toFixed(2)),1),t("span",{class:S(["stock-status",{"in-stock":s.value.stock>0,"out-of-stock":s.value.stock===0}])},e(s.value.stock>0?`åº“å­˜: ${s.value.stock}`:"æš‚æ—¶ç¼ºè´§"),3)]),t("p",J,e(s.value.description),1),t("div",K,[o[7]||(o[7]=t("label",null,"æ•°é‡:",-1)),t("div",L,[t("button",{class:"btn btn-secondary btn-sm",onClick:o[0]||(o[0]=f=>a.value=Math.max(1,a.value-1)),disabled:a.value<=1},"-",8,O),t("span",Q,e(a.value),1),t("button",{class:"btn btn-secondary btn-sm",onClick:o[1]||(o[1]=f=>a.value=Math.min(s.value.stock,a.value+1)),disabled:a.value>=s.value.stock},"+",8,U)])]),t("div",W,[t("button",{class:"btn btn-primary btn-lg",onClick:h,disabled:!_(d).isAuthenticated||s.value.stock===0},e(_(d).isAuthenticated?"åŠ å…¥è´­ç‰©è½¦":"è¯·å…ˆç™»å½•"),9,X),p(u,{to:"/",class:"btn btn-secondary btn-lg"},{default:v(()=>[...o[8]||(o[8]=[m("è¿”å›žé¦–é¡µ",-1)])]),_:1})])])])])):(l(),c("div",M,[o[4]||(o[4]=t("div",{class:"empty-state-icon"},"ðŸ“¦",-1)),o[5]||(o[5]=t("p",{class:"empty-state-text"},"å•†å“ä¸å­˜åœ¨",-1)),p(u,{to:"/",class:"btn btn-primary"},{default:v(()=>[...o[3]||(o[3]=[m("è¿”å›žé¦–é¡µ",-1)])]),_:1})]))])}}},st=g(Y,[["__scopeId","data-v-a1f2311e"]]);export{st as default};
